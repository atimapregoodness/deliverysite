<style>
  :root {
    --primary-blue: #0d6efd;
    --primary-dark: #0b5ed7;
    --secondary-color: #6f42c1;
    --accent-blue: #20c997;
    --accent-gold: #ffc107;
    --dark-color: #212529;
    --light-color: #f8f9fa;
    --gray-color: #6c757d;
    --border-color: #dee2e6;
    --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 4px 15px rgba(0, 0, 0, 0.08);
    --transition: all 0.3s ease;
  }

  /* Modern Compact Header - Glassmorphism */
  .main-header {
    background: rgb(255, 255, 255);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.3);
    position: sticky;
    top: 0;
    z-index: 1030;
    height: 60px;
    transition: var(--transition);
  }

  .header-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 1.5rem;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  /* Compact Logo */
  .logo-container {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    text-decoration: none;
    color: inherit;
    transition: var(--transition);
  }

  .logo-icon-wrapper {
    position: relative;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .logo-icon-bg {
    position: absolute;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      135deg,
      var(--primary-blue),
      var(--secondary-color)
    );
    border-radius: 8px;
    transform: rotate(45deg);
    opacity: 0.9;
    transition: var(--transition);
  }

  .logo-icon {
    font-size: 0.9rem;
    color: white;
    position: relative;
    z-index: 2;
  }

  .logo-text {
    font-size: 1.2rem;
    font-weight: 700;
    background: linear-gradient(
      135deg,
      var(--primary-blue),
      var(--secondary-color)
    );
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    letter-spacing: -0.3px;
  }

  .logo-subtext {
    font-size: 0.55rem;
    letter-spacing: 1px;
    text-transform: uppercase;
    color: var(--gray-color);
    font-weight: 500;
    margin-top: 2px;
  }

  /* Navigation */
  .nav-container {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .nav-main {
    display: flex;
    list-style: none;
    gap: 0.25rem;
  }

  .nav-item {
    position: relative;
  }

  .nav-link,
  .dropdown-trigger {
    color: var(--dark-color);
    text-decoration: none;
    padding: 0.5rem 0.75rem;
    border-radius: 6px;
    font-size: 0.8rem;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 0.4rem;
    transition: var(--transition);
    cursor: pointer;
    background: none;
    border: none;
    font-family: inherit;
    position: relative;
  }

  .nav-link:hover,
  .dropdown-trigger:hover {
    color: var(--primary-blue);
    background: rgba(13, 110, 253, 0.05);
  }

  .nav-link.active,
  .dropdown-trigger.active {
    color: var(--primary-blue);
    background: rgba(13, 110, 253, 0.1);
    font-weight: 600;
  }

  .nav-link i,
  .dropdown-trigger i {
    font-size: 0.75rem;
    width: 14px;
    text-align: center;
  }

  .dropdown-arrow {
    font-size: 0.6rem;
    transition: transform 0.3s ease;
    margin-left: 0.2rem;
  }

  /* Dropdown Menus */
  .dropdown-mega {
    position: absolute;
    top: calc(100% + 5px);
    left: 0;
    width: 220px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
    padding: 0.75rem 0;
    opacity: 0;
    visibility: hidden;
    transform: translateY(10px);
    transition: all 0.3s ease;
    z-index: 1000;
    border: 1px solid var(--border-color);
    overflow: hidden;
  }

  .nav-item:hover .dropdown-mega {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  .dropdown-header {
    padding: 0 1rem 0.5rem;
    margin-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-color);
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--gray-color);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .dropdown-list {
    list-style: none;
  }

  .dropdown-item {
    margin: 0.15rem 0.5rem;
  }

  .dropdown-link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0.75rem;
    color: var(--dark-color);
    text-decoration: none;
    border-radius: 5px;
    font-size: 0.8rem;
    font-weight: 500;
    transition: var(--transition);
  }

  .dropdown-link:hover {
    background: rgba(13, 110, 253, 0.08);
    color: var(--primary-blue);
    transform: translateX(3px);
  }

  .dropdown-link i {
    font-size: 0.7rem;
    color: var(--primary-blue);
    width: 14px;
  }

  /* Professional Badge */
  .professional-badge {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.3rem 0.75rem;
    background: linear-gradient(
      135deg,
      rgba(13, 110, 253, 0.1),
      rgba(32, 201, 151, 0.1)
    );
    border: 1px solid rgba(13, 110, 253, 0.2);
    border-radius: 20px;
    font-size: 0.65rem;
    font-weight: 600;
    color: var(--primary-blue);
    margin-left: 0.75rem;
    transition: var(--transition);
  }

  .professional-badge:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-sm);
    border-color: var(--primary-blue);
  }

  .professional-badge i {
    font-size: 0.6rem;
    color: var(--accent-gold);
  }

  /* Mobile Toggle */
  .mobile-toggle {
    display: none;
    background: none;
    border: none;
    width: 32px;
    height: 32px;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    border-radius: 5px;
    transition: var(--transition);
    color: var(--dark-color);
  }

  .mobile-toggle:hover {
    background: rgba(13, 110, 253, 0.1);
    color: var(--primary-blue);
  }

  /* Responsive Design */
  @media (max-width: 1200px) {
    .header-container {
      padding: 0 1rem;
    }

    .nav-link,
    .dropdown-trigger {
      padding: 0.5rem 0.6rem;
      font-size: 0.78rem;
    }
  }

  @media (max-width: 1100px) {
    .main-header {
      height: 56px;
    }

    .mobile-toggle {
      display: flex;
    }

    .nav-container {
      position: fixed;
      top: 56px;
      left: 0;
      right: 0;
      background: white;
      padding: 1rem;
      flex-direction: column;
      align-items: stretch;
      gap: 0;
      transform: translateX(-100%);
      opacity: 0;
      visibility: hidden;
      transition: var(--transition);
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
      max-height: calc(100vh - 56px);
      overflow-y: auto;
      z-index: 1020;
    }

    .nav-container.active {
      transform: translateX(0);
      opacity: 1;
      visibility: visible;
    }

    .nav-main {
      flex-direction: column;
      gap: 0.25rem;
      margin-bottom: 1rem;
    }

    .nav-item {
      border-bottom: 1px solid rgba(222, 226, 230, 0.5);
    }

    .nav-item:last-child {
      border-bottom: none;
    }

    .nav-link,
    .dropdown-trigger {
      padding: 0.75rem;
      font-size: 0.85rem;
      justify-content: space-between;
      border-radius: 5px;
    }

    .dropdown-mega {
      position: static;
      width: 100%;
      opacity: 1;
      visibility: visible;
      transform: none;
      box-shadow: none;
      border: none;
      margin-top: 0.25rem;
      padding: 0;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }

    .dropdown-mega.active {
      max-height: 500px;
      padding: 0.5rem 0;
    }

    .dropdown-header {
      padding: 0.5rem 1rem;
      margin: 0;
    }

    .dropdown-list {
      padding: 0 0.5rem;
    }

    .dropdown-link {
      padding: 0.6rem 1rem;
      font-size: 0.85rem;
    }

    .professional-badge {
      justify-content: center;
      margin: 0.5rem auto 0;
      width: fit-content;
      order: 1;
    }
  }

  /* Small mobile devices */
  @media (max-width: 480px) {
    .header-container {
      padding: 0 0.75rem;
    }

    .logo-text {
      font-size: 1.1rem;
    }

    .logo-subtext {
      font-size: 0.5rem;
    }

    .nav-container {
      padding: 0.75rem;
    }

    .nav-link,
    .dropdown-trigger {
      padding: 0.7rem;
      font-size: 0.82rem;
    }

    .dropdown-link {
      padding: 0.55rem 0.75rem;
      font-size: 0.8rem;
    }
  }

  /* Animation for dropdown items */
  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(-5px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .dropdown-mega .dropdown-item {
    animation: slideIn 0.2s ease forwards;
    opacity: 0;
  }

  .dropdown-mega .dropdown-item:nth-child(1) {
    animation-delay: 0.05s;
  }
  .dropdown-mega .dropdown-item:nth-child(2) {
    animation-delay: 0.1s;
  }
  .dropdown-mega .dropdown-item:nth-child(3) {
    animation-delay: 0.15s;
  }
  .dropdown-mega .dropdown-item:nth-child(4) {
    animation-delay: 0.2s;
  }
  .dropdown-mega .dropdown-item:nth-child(5) {
    animation-delay: 0.25s;
  }

  /* Scroll behavior for header */
  .main-header.scrolled {
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
  }

  /* Focus states for accessibility */
  .nav-link:focus,
  .dropdown-trigger:focus,
  .dropdown-link:focus,
  .mobile-toggle:focus {
    outline: 2px solid var(--primary-blue);
    outline-offset: 2px;
  }

  /* Touch device optimizations */
  @media (hover: none) and (pointer: coarse) {
    .nav-link,
    .dropdown-trigger {
      padding: 0.6rem 0.75rem;
    }

    .dropdown-link {
      padding: 0.6rem 1rem;
    }
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .nav-link.active,
    .dropdown-trigger.active {
      outline: 2px solid currentColor;
    }

    .dropdown-mega {
      border: 2px solid currentColor;
    }
  }
</style>

<header class="main-header">
  <div class="header-container">
    <!-- Logo -->
    <a href="/" class="logo-container">
      <div class="logo-icon-wrapper">
        <div class="logo-icon-bg"></div>
        <i class="fas fa-shipping-fast logo-icon"></i>
      </div>
      <div>
        <div class="logo-text">SHIELD LOGISTICS</div>
        <div class="logo-subtext">Secure • Swift • Reliable</div>
      </div>
    </a>

    <!-- Desktop Navigation -->
    <nav class="nav-container" id="mainNav">
      <ul class="nav-main">
        <li class="nav-item">
          <a
            href="/"
            class="nav-link <%= currentPage === 'home' ? 'active' : '' %>"
          >
            <i class="fas fa-home"></i>
            <span>Home</span>
          </a>
        </li>

        <!-- Track Delivery -->
        <li class="nav-item">
          <a
            href="/track"
            class="nav-link <%= (currentPage === 'track' || currentPage === 'delivery/track') ? 'active' : '' %>"
          >
            <i class="fas fa-location-dot"></i>
            <span>Track Delivery</span>
          </a>
        </li>

        <!-- Security Services -->
        <li class="nav-item">
          <button
            class="nav-link dropdown-trigger <%= currentPage === 'security' ? 'active' : '' %>"
            type="button"
          >
            <i class="fas fa-user-shield"></i>
            <span>Security</span>
            <i class="fas fa-chevron-down dropdown-arrow"></i>
          </button>
          <div class="dropdown-mega">
            <div class="dropdown-header">Security Solutions</div>
            <ul class="dropdown-list">
              <li class="dropdown-item">
                <a href="/security/static-guards" class="dropdown-link">
                  <i class="fas fa-user-check"></i>
                  <span>Static Security Guards</span>
                </a>
              </li>
              <li class="dropdown-item">
                <a href="/security/mobile-patrols" class="dropdown-link">
                  <i class="fas fa-car-alt"></i>
                  <span>Mobile Patrols</span>
                </a>
              </li>
              <li class="dropdown-item">
                <a href="/security/alarm-monitoring" class="dropdown-link">
                  <i class="fas fa-bell"></i>
                  <span>Alarm Monitoring</span>
                </a>
              </li>
              <li class="dropdown-item">
                <a href="/security/cctv" class="dropdown-link">
                  <i class="fas fa-video"></i>
                  <span>CCTV Systems</span>
                </a>
              </li>
              <li class="dropdown-item">
                <a href="/security/cyber" class="dropdown-link">
                  <i class="fas fa-lock"></i>
                  <span>Cybersecurity</span>
                </a>
              </li>
            </ul>
          </div>
        </li>

        <!-- Logistics Services -->
        <li class="nav-item">
          <button
            class="nav-link dropdown-trigger <%= currentPage === 'logistics' ? 'active' : '' %>"
            type="button"
          >
            <i class="fas fa-shipping-fast"></i>
            <span>Logistics</span>
            <i class="fas fa-chevron-down dropdown-arrow"></i>
          </button>
          <div class="dropdown-mega">
            <div class="dropdown-header">Logistics Solutions</div>
            <ul class="dropdown-list">
              <li class="dropdown-item">
                <a href="/logistics/freight-forwarding" class="dropdown-link">
                  <i class="fas fa-plane-departure"></i>
                  <span>Freight Forwarding</span>
                </a>
              </li>
              <li class="dropdown-item">
                <a href="/logistics/warehousing" class="dropdown-link">
                  <i class="fas fa-warehouse"></i>
                  <span>Warehousing</span>
                </a>
              </li>
              <li class="dropdown-item">
                <a href="/logistics/distribution" class="dropdown-link">
                  <i class="fas fa-route"></i>
                  <span>Last-Mile Delivery</span>
                </a>
              </li>
              <li class="dropdown-item">
                <a href="/logistics/cold-chain" class="dropdown-link">
                  <i class="fas fa-snowflake"></i>
                  <span>Cold Chain</span>
                </a>
              </li>
              <li class="dropdown-item">
                <a href="/logistics/supply-chain" class="dropdown-link">
                  <i class="fas fa-project-diagram"></i>
                  <span>Supply Chain</span>
                </a>
              </li>
            </ul>
          </div>
        </li>

        <!-- Company -->
        <li class="nav-item">
          <button
            class="nav-link dropdown-trigger <%= currentPage === 'company' ? 'active' : '' %>"
            type="button"
          >
            <i class="fas fa-landmark"></i>
            <span>Company</span>
            <i class="fas fa-chevron-down dropdown-arrow"></i>
          </button>
          <div class="dropdown-mega">
            <div class="dropdown-header">Company Information</div>
            <ul class="dropdown-list">
              <li class="dropdown-item">
                <a href="/about" class="dropdown-link">
                  <i class="fas fa-building"></i>
                  <span>About Us</span>
                </a>
              </li>
              <li class="dropdown-item">
                <a href="/contact" class="dropdown-link">
                  <i class="fas fa-phone-alt"></i>
                  <span>Contact Us</span>
                </a>
              </li>

              <li class="dropdown-item">
                <a href="/company/certifications" class="dropdown-link">
                  <i class="fas fa-award"></i>
                  <span>Certifications</span>
                </a>
              </li>
            </ul>
          </div>
        </li>
      </ul>

      <!-- Professional Badge -->
      <div class="professional-badge">
        <i class="fas fa-certificate"></i>
        <span>ISO 9001:2023</span>
      </div>
    </nav>

    <!-- Mobile Menu Toggle -->
    <button class="mobile-toggle" id="mobileToggle" aria-label="Menu">
      <i class="fas fa-bars"></i>
    </button>
  </div>
</header>

<script>
  // Mobile Menu Toggle
  const mobileToggle = document.getElementById("mobileToggle");
  const navContainer = document.getElementById("mainNav");
  const body = document.body;

  mobileToggle.addEventListener("click", () => {
    const isActive = navContainer.classList.toggle("active");
    mobileToggle.innerHTML = isActive
      ? '<i class="fas fa-times"></i>'
      : '<i class="fas fa-bars"></i>';

    if (isActive) {
      body.style.overflow = "hidden";
    } else {
      body.style.overflow = "";
    }
  });

  // Mobile Dropdown Toggle
  document.querySelectorAll(".dropdown-trigger").forEach((trigger) => {
    trigger.addEventListener("click", (e) => {
      if (window.innerWidth <= 1100) {
        e.preventDefault();
        e.stopPropagation();

        const dropdown = trigger.nextElementSibling;
        const isActive = dropdown.classList.contains("active");
        const arrow = trigger.querySelector(".dropdown-arrow");

        // Close other dropdowns
        document.querySelectorAll(".dropdown-mega.active").forEach((dd) => {
          if (dd !== dropdown) {
            dd.classList.remove("active");
            const otherArrow =
              dd.previousElementSibling.querySelector(".dropdown-arrow");
            if (otherArrow) otherArrow.style.transform = "rotate(0deg)";
          }
        });

        // Toggle current dropdown
        dropdown.classList.toggle("active");

        // Rotate arrow
        if (arrow) {
          arrow.style.transform = isActive ? "rotate(0deg)" : "rotate(180deg)";
        }
      }
    });
  });

  // Close dropdowns when clicking outside on mobile
  document.addEventListener("click", (e) => {
    if (window.innerWidth <= 1100) {
      if (
        !e.target.closest(".nav-item") &&
        !e.target.closest(".mobile-toggle")
      ) {
        document
          .querySelectorAll(".dropdown-mega.active")
          .forEach((dropdown) => {
            dropdown.classList.remove("active");
            const arrow =
              dropdown.previousElementSibling.querySelector(".dropdown-arrow");
            if (arrow) arrow.style.transform = "rotate(0deg)";
          });
      }
    }
  });

  // Close mobile menu when clicking a link
  document
    .querySelectorAll(".nav-link[href], .dropdown-link")
    .forEach((link) => {
      link.addEventListener("click", () => {
        if (window.innerWidth <= 1100) {
          navContainer.classList.remove("active");
          mobileToggle.innerHTML = '<i class="fas fa-bars"></i>';
          body.style.overflow = "";

          // Close all dropdowns
          document
            .querySelectorAll(".dropdown-mega.active")
            .forEach((dropdown) => {
              dropdown.classList.remove("active");
              const arrow =
                dropdown.previousElementSibling.querySelector(
                  ".dropdown-arrow"
                );
              if (arrow) arrow.style.transform = "rotate(0deg)";
            });
        }
      });
    });

  // Header scroll effect
  const header = document.querySelector(".main-header");
  let lastScroll = 0;

  window.addEventListener("scroll", () => {
    const currentScroll = window.pageYOffset;

    // Add shadow on scroll
    if (currentScroll > 10) {
      header.classList.add("scrolled");
    } else {
      header.classList.remove("scrolled");
    }

    // Hide/show header on scroll (desktop only)
    if (window.innerWidth > 1100 && currentScroll > 100) {
      if (currentScroll > lastScroll && currentScroll > 200) {
        header.style.transform = "translateY(-100%)";
      } else {
        header.style.transform = "translateY(0)";
      }
    } else {
      header.style.transform = "translateY(0)";
    }

    lastScroll = currentScroll;
  });

  // Logo hover effect
  const logoContainer = document.querySelector(".logo-container");
  const logoIconBg = document.querySelector(".logo-icon-bg");

  if (logoContainer && logoIconBg) {
    logoContainer.addEventListener("mouseenter", () => {
      logoIconBg.style.transform = "rotate(45deg) scale(1.1)";
    });

    logoContainer.addEventListener("mouseleave", () => {
      logoIconBg.style.transform = "rotate(45deg) scale(1)";
    });
  }

  // Handle window resize
  window.addEventListener("resize", () => {
    if (window.innerWidth > 1100) {
      // Reset mobile menu
      navContainer.classList.remove("active");
      mobileToggle.innerHTML = '<i class="fas fa-bars"></i>';
      body.style.overflow = "";

      // Reset dropdown arrows
      document.querySelectorAll(".dropdown-arrow").forEach((arrow) => {
        arrow.style.transform = "rotate(0deg)";
      });
    }
  });

  // Keyboard navigation
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") {
      // Close mobile menu
      if (
        window.innerWidth <= 1100 &&
        navContainer.classList.contains("active")
      ) {
        navContainer.classList.remove("active");
        mobileToggle.innerHTML = '<i class="fas fa-bars"></i>';
        body.style.overflow = "";
      }

      // Close dropdowns
      document.querySelectorAll(".dropdown-mega.active").forEach((dropdown) => {
        dropdown.classList.remove("active");
        const arrow =
          dropdown.previousElementSibling.querySelector(".dropdown-arrow");
        if (arrow) arrow.style.transform = "rotate(0deg)";
      });
    }
  });

  // Initialize header with shadow if scrolled on load
  if (window.pageYOffset > 10) {
    header.classList.add("scrolled");
  }
</script>
