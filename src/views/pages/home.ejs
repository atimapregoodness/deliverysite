<%- layout('layouts/main') %>
<title>Nexus Logistics | Smart Delivery Solutions</title>

<style>
  :root {
    --primary-color: #0d6efd;
    --primary-dark: #0b5ed7;
    --secondary-color: #6f42c1;
    --accent-color: #20c997;
    --dark-color: #212529;
    --light-color: #f8f9fa;
    --gray-color: #6c757d;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: "Outfit", sans-serif;
    font-weight: 700;
  }

  .section-title {
    position: relative;
    margin-bottom: 3rem;
  }

  .section-title:after {
    content: "";
    position: absolute;
    left: 0;
    bottom: -10px;
    width: 60px;
    height: 4px;
    background: linear-gradient(
      90deg,
      var(--primary-color),
      var(--secondary-color)
    );
    border-radius: 2px;
  }

  .section-title.text-center:after {
    left: 50%;
    transform: translateX(-50%);
  }

  .gradient-text {
    background: linear-gradient(
      90deg,
      var(--primary-color),
      var(--secondary-color)
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .btn-gradient {
    background: linear-gradient(
      90deg,
      var(--primary-color),
      var(--secondary-color)
    );
    border: none;
    color: white;
    transition: all 0.3s ease;
  }

  .btn-gradient:hover {
    background: linear-gradient(90deg, var(--primary-dark), #5a32a3);
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(13, 110, 253, 0.3);
  }

  .card-hover {
    transition: all 0.3s ease;
    border: none;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
  }

  .card-hover:hover {
    transform: translateY(-10px);
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
  }

  .stat-card {
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    transition: all 0.3s ease;
  }

  .stat-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  }

  .service-icon {
    width: 70px;
    height: 70px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 1.5rem;
    font-size: 1.8rem;
    color: white;
  }

  .bg-gradient-primary {
    background: linear-gradient(
      135deg,
      var(--primary-color),
      var(--secondary-color)
    );
  }

  .bg-gradient-dark {
    background: linear-gradient(135deg, #2c3e50, #34495e);
  }

  .tracking-input {
    border-radius: 50px;
    padding: 0.8rem 1.5rem;
    border: 2px solid #e9ecef;
    font-weight: 500;
  }

  .tracking-input:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.1);
  }

  .network-line {
    position: relative;
    height: 2px;
    background: linear-gradient(
      90deg,
      transparent,
      var(--primary-color),
      transparent
    );
    margin: 2rem 0;
  }

  .network-line:before,
  .network-line:after {
    content: "";
    position: absolute;
    width: 12px;
    height: 12px;
    background: var(--primary-color);
    border-radius: 50%;
    top: -5px;
  }

  .network-line:before {
    left: 20%;
  }

  .network-line:after {
    right: 20%;
  }

  .floating-animation {
    animation: floating 3s ease-in-out infinite;
  }

  @keyframes floating {
    0%,
    100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  .pulse-animation {
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0% {
      box-shadow: 0 0 0 0 rgba(13, 110, 253, 0.4);
    }
    70% {
      box-shadow: 0 0 0 10px rgba(13, 110, 253, 0);
    }
    100% {
      box-shadow: 0 0 0 0 rgba(13, 110, 253, 0);
    }
  }

  .testimonial-card {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
    position: relative;
  }

  .testimonial-card:before {
    content: '"';
    position: absolute;
    top: 10px;
    left: 20px;
    font-size: 4rem;
    color: var(--primary-color);
    opacity: 0.2;
    font-family: Georgia, serif;
  }

  @media (max-width: 768px) {
    .hero-title {
      font-size: 2.5rem;
    }

    .section-padding {
      padding: 3rem 0;
    }
  }

  /* Add to your existing CSS */
  .tracking-input {
    border-radius: 50px 0 0 50px !important;
    padding: 0.8rem 1.5rem;
    border: 2px solid #e9ecef;
    border-right: none !important;
    font-weight: 500;
    transition: all 0.3s ease;
  }

  .tracking-input:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.1);
    outline: none;
  }

  .tracking-input::placeholder {
    color: #adb5bd;
    opacity: 0.8;
  }

  .btn-track {
    background: linear-gradient(
      90deg,
      var(--primary-color),
      var(--secondary-color)
    );
    border: none;
    color: white;
    border-radius: 0 50px 50px 0 !important;
    padding: 0.8rem 1.5rem;
    font-weight: 600;
    transition: all 0.3s ease;
  }

  .btn-track:hover {
    background: linear-gradient(90deg, var(--primary-dark), #5a32a3);
    color: white;
    transform: translateY(-1px);
    box-shadow: 0 5px 15px rgba(13, 110, 253, 0.3);
  }

  .btn-track:active {
    transform: translateY(0);
  }

  .input-group.shadow-sm {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    border-radius: 50px;
    transition: box-shadow 0.3s ease;
  }

  .input-group.shadow-sm:hover {
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
  }

  .form-text.fs-7 {
    font-size: 0.85rem;
  }

  .btn-outline-primary.border-2 {
    border-width: 2px !important;
    font-weight: 500;
  }

  .btn-outline-primary.border-2:hover {
    background-color: rgba(13, 110, 253, 0.05);
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .tracking-input,
    .btn-track {
      padding: 0.7rem 1.2rem;
      font-size: 0.95rem;
    }

    .btn-track {
      padding-left: 1rem;
      padding-right: 1rem;
    }

    .tracking-input::placeholder {
      font-size: 0.9rem;
    }
  }

  /* Validation styles */
  .tracking-input.is-valid {
    border-color: var(--accent-color) !important;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%2320c997' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right calc(0.375em + 0.1875rem) center;
    background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
  }

  .tracking-input.is-invalid {
    border-color: #dc3545 !important;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right calc(0.375em + 0.1875rem) center;
    background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
  }

  .error-message {
    display: none;
    margin-top: 0.5rem;
    font-size: 0.875rem;
  }

  .error-message.show {
    display: block;
  }

  .error-message .alert {
    border-radius: 8px;
    padding: 0.75rem 1rem;
    margin-bottom: 0;
  }
</style>

<!-- Hero Section -->
<section
  id="home"
  style="
    background: linear-gradient(
        rgba(255, 255, 255, 0.953),
        rgba(255, 255, 255, 0.934)
      ),
      url('/assets/images/cover_1.avif') center/cover;
  "
>
  <div class="container py-5">
    <div class="row align-items-center">
      <div class="col-lg-6" data-aos="fade-right">
        <span
          class="badge bg-primary bg-opacity-10 text-primary rounded-pill px-3 py-2 mb-3 d-inline-block"
        >
          <i class="fas fa-bolt me-1"></i> Trusted by 50,000+ Enterprises
        </span>

        <h1 class="hero-title display-4 fw-bold mb-4">
          Smart, Secure & <br />
          <span class="gradient-text">Real-Time Delivery</span>
        </h1>

        <p class="lead text-gray-700 mb-4">
          Track, manage, and deliver packages worldwide with precision, scale,
          and total transparency. Enterprise-grade logistics solutions powered
          by AI.
        </p>
        <div class="row g-3 mb-4">
          <div class="col-md-8">
            <form id="trackingForm" onsubmit="handleTrackSubmit(event)">
              <div class="input-group shadow-sm">
                <input
                  type="text"
                  id="trackingId"
                  name="trackingId"
                  class="form-control tracking-input"
                  placeholder="DEL-51434020-X3RY"
                  pattern="^DEL-\d{8}-[A-Z0-9]{4}$"
                  title="Format: DEL-8 digits-4 characters (e.g., DEL-51434020-X3RY)"
                  required
                  autocomplete="off"
                  autocorrect="off"
                  spellcheck="false"
                  value="<%= typeof trackingId !== 'undefined' ? trackingId : '' %>"
                />
                <button
                  class="btn btn-track shadow-lg"
                  type="submit"
                  id="submitBtn"
                >
                  <i class="fas fa-satellite-dish me-2"></i>Track Delivery
                </button>
              </div>

              <div
                class="d-flex flex-wrap align-items-center justify-content-between mt-3"
              >
                <div class="form-text text-muted fs-7">
                  <i class="fas fa-key me-1"></i>
                  Format: DEL-XXXXXXXX-XXXX (Example: DEL-51434020-X3RY)
                </div>
                <button
                  type="button"
                  class="btn btn-sm btn-outline-primary border-2 rounded-pill px-3"
                  onclick="pasteFromClipboard()"
                  id="pasteBtn"
                >
                  <i class="fas fa-paste me-1"></i>Paste from clipboard
                </button>
              </div>

              <!-- Error container -->
              <div id="errorContainer" class="mt-3" style="display: none"></div>
            </form>
          </div>
        </div>

        <div class="d-flex align-items-center">
          <div class="d-flex me-4">
            <img
              src="https://randomuser.me/api/portraits/men/32.jpg"
              class="rounded-circle border border-3 border-white"
              width="40"
              height="40"
              alt="User"
            />
            <img
              src="https://randomuser.me/api/portraits/women/44.jpg"
              class="rounded-circle border border-3 border-white ms-n2"
              width="40"
              height="40"
              alt="User"
            />
            <img
              src="https://randomuser.me/api/portraits/men/22.jpg"
              class="rounded-circle border border-3 border-white ms-n2"
              width="40"
              height="40"
              alt="User"
            />
            <img
              src="https://randomuser.me/api/portraits/women/68.jpg"
              class="rounded-circle border border-3 border-white ms-n2"
              width="40"
              height="40"
              alt="User"
            />
            <div
              class="rounded-circle bg-primary bg-opacity-10 border border-3 border-white ms-n2 d-flex align-items-center justify-content-center"
              style="width: 40px; height: 40px"
            >
              <small class="text-primary fw-bold">+47</small>
            </div>
          </div>
          <div>
            <p class="mb-0 small text-gray-600">Global Excellence Award 2023</p>
            <div class="text-warning">
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
            </div>
          </div>
        </div>
      </div>

      <div class="col-lg-6 mt-5 mt-lg-0" data-aos="fade-left">
        <div class="position-relative">
          <img
            src="/assets/images/stats_photo1.avif"
            class="img-fluid rounded-3 shadow-lg floating-animation"
            alt="Delivery Network"
          />

          <div
            class="position-absolute bottom-0 start-0 bg-white rounded-3 shadow p-3 m-3"
            style="max-width: 250px"
          >
            <div class="d-flex align-items-center">
              <div class="bg-success rounded-2 p-2 me-3">
                <i class="fas fa-truck text-white"></i>
              </div>
              <div>
                <h6 class="mb-0 fw-bold">12,400+ Units</h6>
                <small class="text-gray-600">In Transit</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Rest of your sections remain the same -->
<section class="py-4 bg-light">
  <div class="container">
    <div class="row g-4">
      <div class="col-md-3" data-aos="fade-up">
        <div class="stat-card text-center">
          <h3 class="display-6 fw-bold text-primary mb-2">48.5M+</h3>
          <p class="text-gray-600 mb-0 small">Deliveries Completed</p>
        </div>
      </div>

      <div class="col-md-3" data-aos="fade-up" data-aos-delay="100">
        <div class="stat-card text-center">
          <h3 class="display-6 fw-bold text-success mb-2">12,400</h3>
          <p class="text-gray-600 mb-0 small">Active Fleet</p>
        </div>
      </div>

      <div class="col-md-3" data-aos="fade-up" data-aos-delay="200">
        <div class="stat-card text-center">
          <h3 class="display-6 fw-bold text-info mb-2">142</h3>
          <p class="text-gray-600 mb-0 small">Countries Covered</p>
        </div>
      </div>

      <div class="col-md-3" data-aos="fade-up" data-aos-delay="300">
        <div class="stat-card text-center">
          <h3 class="display-6 fw-bold text-warning mb-2">2.4 hrs</h3>
          <p class="text-gray-600 mb-0 small">Avg Delivery Time</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Services -->
<section id="services" class="section-padding py-5">
  <div class="container">
    <div class="row mb-5">
      <div class="col-lg-8">
        <h2 class="section-title h1 fw-bold">Strategic Delivery Solutions</h2>
        <p class="lead text-gray-700">
          Comprehensive logistics services covering every aspect of modern
          supply chain management.
        </p>
      </div>
      <div class="col-lg-4 text-lg-end">
        <a href="#" class="btn btn-outline-primary rounded-pill px-4"
          >View All Services <i class="fas fa-arrow-right ms-1"></i
        ></a>
      </div>
    </div>

    <div class="row g-4">
      <div class="col-md-6 col-lg-4" data-aos="fade-up">
        <div class="card card-hover h-100 border-0">
          <div class="card-body p-4">
            <div class="service-icon bg-primary">
              <i class="fas fa-map-marker-alt"></i>
            </div>
            <h4 class="card-title fw-bold mb-3">Real-Time Tracking</h4>
            <p class="card-text text-gray-600 mb-4">
              End-to-end visibility with GPS precision and AI-powered ETAs.
              Track shipments down to street level in real-time.
            </p>
            <a href="#" class="text-primary fw-semibold text-decoration-none">
              Learn More <i class="fas fa-arrow-right ms-1"></i>
            </a>
          </div>
        </div>
      </div>

      <div class="col-md-6 col-lg-4" data-aos="fade-up" data-aos-delay="100">
        <div class="card card-hover h-100 border-0">
          <div class="card-body p-4">
            <div class="service-icon bg-info">
              <i class="fas fa-boxes"></i>
            </div>
            <h4 class="card-title fw-bold mb-3">Warehouse Management</h4>
            <p class="card-text text-gray-600 mb-4">
              Smart storage solutions with automated sorting and real-time
              inventory control via API integration.
            </p>
            <a href="#" class="text-primary fw-semibold text-decoration-none">
              Learn More <i class="fas fa-arrow-right ms-1"></i>
            </a>
          </div>
        </div>
      </div>

      <div class="col-md-6 col-lg-4" data-aos="fade-up" data-aos-delay="200">
        <div class="card card-hover h-100 border-0">
          <div class="card-body p-4">
            <div class="service-icon bg-success">
              <i class="fas fa-truck"></i>
            </div>
            <h4 class="card-title fw-bold mb-3">Fleet Monitoring</h4>
            <p class="card-text text-gray-600 mb-4">
              Advanced telematics for real-time driver performance metrics and
              automated route optimization.
            </p>
            <a href="#" class="text-primary fw-semibold text-decoration-none">
              Learn More <i class="fas fa-arrow-right ms-1"></i>
            </a>
          </div>
        </div>
      </div>

      <div class="col-md-6 col-lg-4" data-aos="fade-up" data-aos-delay="50">
        <div class="card card-hover h-100 border-0">
          <div class="card-body p-4">
            <div class="service-icon bg-secondary">
              <i class="fas fa-globe-americas"></i>
            </div>
            <h4 class="card-title fw-bold mb-3">International Shipping</h4>
            <p class="card-text text-gray-600 mb-4">
              Seamless cross-border customs clearance and global air-freight via
              the Nexus network.
            </p>
            <a href="#" class="text-primary fw-semibold text-decoration-none">
              Learn More <i class="fas fa-arrow-right ms-1"></i>
            </a>
          </div>
        </div>
      </div>

      <div class="col-md-6 col-lg-4" data-aos="fade-up" data-aos-delay="150">
        <div class="card card-hover h-100 border-0">
          <div class="card-body p-4">
            <div class="service-icon bg-warning">
              <i class="fas fa-shield-alt"></i>
            </div>
            <h4 class="card-title fw-bold mb-3">SafeGuard™ Insurance</h4>
            <p class="card-text text-gray-600 mb-4">
              Specialized insurance and biometric verification for high-value
              and sensitive assets in transit.
            </p>
            <a href="#" class="text-primary fw-semibold text-decoration-none">
              Learn More <i class="fas fa-arrow-right ms-1"></i>
            </a>
          </div>
        </div>
      </div>

      <div class="col-md-6 col-lg-4" data-aos="fade-up" data-aos-delay="250">
        <div class="card card-hover h-100 border-0">
          <div class="card-body p-4">
            <div
              class="service-icon bg-purple"
              style="background-color: #6f42c1"
            >
              <i class="fas fa-microchip"></i>
            </div>
            <h4 class="card-title fw-bold mb-3">Enterprise API</h4>
            <p class="card-text text-gray-600 mb-4">
              Deep integration for e-commerce platforms with automated dispatch
              and checkout logistics.
            </p>
            <a href="#" class="text-primary fw-semibold text-decoration-none">
              Learn More <i class="fas fa-arrow-right ms-1"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Network Section -->
<section id="network" class="section-padding py-5 bg-dark text-white">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-6 mb-5 mb-lg-0" data-aos="fade-right">
        <h2 class="section-title h1 fw-bold text-white">
          Global Intelligence Network
        </h2>
        <p class="lead mb-4 text-light">
          Our infrastructure is built on low-latency telemetry and distributed
          routing nodes, ensuring optimal delivery paths and real-time tracking
          across 142 countries.
        </p>

        <div class="row mt-4">
          <div class="col-md-6 mb-4" data-aos="fade-up">
            <div class="d-flex align-items-center">
              <div class="bg-primary bg-opacity-20 rounded-2 p-3 me-3">
                <i class="fas fa-tachometer-alt display-6 text-primary"></i>
              </div>
              <div>
                <h3 class="h2 fw-bold mb-0">99.9%</h3>
                <p class="text-light opacity-75 mb-0">System Uptime</p>
              </div>
            </div>
          </div>

          <div class="col-md-6 mb-4" data-aos="fade-up" data-aos-delay="100">
            <div class="d-flex align-items-center">
              <div class="bg-success bg-opacity-20 rounded-2 p-3 me-3">
                <i class="fas fa-shield-alt display-6 text-success"></i>
              </div>
              <div>
                <h3 class="h2 fw-bold mb-0">ISO 27001</h3>
                <p class="text-light opacity-75 mb-0">Certified Security</p>
              </div>
            </div>
          </div>
        </div>

        <div class="network-line"></div>

        <div class="d-flex align-items-center mt-4">
          <div class="me-4">
            <i class="fas fa-check-circle text-success fs-4"></i>
          </div>
          <div>
            <h5 class="fw-bold">AI-Powered Routing</h5>
            <p class="text-light opacity-75 mb-0">
              Dynamic route optimization based on traffic, weather, and delivery
              priorities
            </p>
          </div>
        </div>
      </div>

      <div class="col-lg-6" data-aos="fade-left">
        <div class="position-relative">
          <img
            src="/assets/images/stats_photo.avif"
            class="img-fluid rounded-3 shadow-lg"
            alt="Global Network"
          />

          <div class="position-absolute top-0 start-0 translate-middle">
            <div class="bg-primary rounded-circle p-2 pulse-animation">
              <div
                class="bg-white rounded-circle d-flex align-items-center justify-content-center"
                style="width: 40px; height: 40px"
              >
                <i class="fas fa-map-marker-alt text-primary"></i>
              </div>
            </div>
          </div>

          <div class="position-absolute bottom-0 end-0 translate-middle">
            <div class="bg-success rounded-circle p-2 pulse-animation">
              <div
                class="bg-white rounded-circle d-flex align-items-center justify-content-center"
                style="width: 40px; height: 40px"
              >
                <i class="fas fa-truck text-success"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- How It Works -->
<section id="solutions" class="section-padding py-5">
  <div class="container">
    <div class="row mb-5">
      <div class="col-lg-8 mx-auto text-center">
        <h2 class="section-title h1 fw-bold text-center">Precision Workflow</h2>
        <p class="lead text-gray-700">
          Four seamless steps to global delivery efficiency
        </p>
      </div>
    </div>

    <div class="row g-4">
      <div class="col-md-6 col-lg-3" data-aos="fade-up">
        <div class="text-center p-4">
          <div
            class="bg-primary bg-opacity-10 rounded-3 p-4 mb-3 mx-auto"
            style="width: 100px; height: 100px"
          >
            <span class="display-5 fw-bold text-primary d-block">01</span>
          </div>
          <h4 class="fw-bold mb-3">Create Shipment</h4>
          <p class="text-gray-600">
            Input destination details via portal or secure API integration with
            automated documentation.
          </p>
        </div>
      </div>

      <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="100">
        <div class="text-center p-4">
          <div
            class="bg-info bg-opacity-10 rounded-3 p-4 mb-3 mx-auto"
            style="width: 100px; height: 100px"
          >
            <span class="display-5 fw-bold text-info d-block">02</span>
          </div>
          <h4 class="fw-bold mb-3">AI Route Assign</h4>
          <p class="text-gray-600">
            Nexus Engine determines the fastest path using real-time data and
            predictive analytics.
          </p>
        </div>
      </div>

      <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="200">
        <div class="text-center p-4">
          <div
            class="bg-success bg-opacity-10 rounded-3 p-4 mb-3 mx-auto"
            style="width: 100px; height: 100px"
          >
            <span class="display-5 fw-bold text-success d-block">03</span>
          </div>
          <h4 class="fw-bold mb-3">Live Telemetry</h4>
          <p class="text-gray-600">
            Monitor sub-second updates from our smart fleet with GPS tracking
            and condition monitoring.
          </p>
        </div>
      </div>

      <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="300">
        <div class="text-center p-4">
          <div
            class="bg-warning bg-opacity-10 rounded-3 p-4 mb-3 mx-auto"
            style="width: 100px; height: 100px"
          >
            <span class="display-5 fw-bold text-warning d-block">04</span>
          </div>
          <h4 class="fw-bold mb-3">Confirm Delivery</h4>
          <p class="text-gray-600">
            Biometric proof-of-delivery, instant invoicing, and automated
            customer notifications.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Testimonials -->
<section id="testimonials" class="section-padding py-5 bg-light">
  <div class="container">
    <div class="row mb-5">
      <div class="col-lg-8 mx-auto text-center">
        <h2 class="section-title h1 fw-bold text-center">
          Trusted by Industry Leaders
        </h2>
        <p class="lead text-gray-700">
          See what our enterprise clients say about our delivery solutions
        </p>
      </div>
    </div>

    <div class="row g-4">
      <div class="col-lg-4" data-aos="fade-up">
        <div class="testimonial-card h-100">
          <div class="text-warning mb-3">
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
          </div>
          <p class="mb-4">
            "Nexus transformed our supply chain visibility overnight. Their
            real-time tracking precision is unmatched in the industry. Delivery
            times improved by 34%."
          </p>
          <div class="d-flex align-items-center">
            <img
              src="https://randomuser.me/api/portraits/women/44.jpg"
              class="rounded-circle me-3"
              width="50"
              height="50"
              alt="Elena Vance"
            />
            <div>
              <h6 class="fw-bold mb-0">Elena Vance</h6>
              <small class="text-gray-600">Head of Operations, NexaCorp</small>
            </div>
          </div>
        </div>
      </div>

      <div class="col-lg-4" data-aos="fade-up" data-aos-delay="100">
        <div class="testimonial-card h-100">
          <div class="text-warning mb-3">
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
          </div>
          <p class="mb-4">
            "The temperature-controlled tracking via SafeGuard has saved us
            millions in critical pharmaceutical shipments. Compliance reporting
            is now fully automated."
          </p>
          <div class="d-flex align-items-center">
            <img
              src="https://randomuser.me/api/portraits/men/32.jpg"
              class="rounded-circle me-3"
              width="50"
              height="50"
              alt="David Chen"
            />
            <div>
              <h6 class="fw-bold mb-0">David Chen</h6>
              <small class="text-gray-600">CTO, BioPharma Global</small>
            </div>
          </div>
        </div>
      </div>

      <div class="col-lg-4" data-aos="fade-up" data-aos-delay="200">
        <div class="testimonial-card h-100">
          <div class="text-warning mb-3">
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
          </div>
          <p class="mb-4">
            "Integration took less than a day with their API. Our customers love
            the transparent, live delivery experience. Customer satisfaction
            increased by 28%."
          </p>
          <div class="d-flex align-items-center">
            <img
              src="https://randomuser.me/api/portraits/women/68.jpg"
              class="rounded-circle me-3"
              width="50"
              height="50"
              alt="Sarah Miller"
            />
            <div>
              <h6 class="fw-bold mb-0">Sarah Miller</h6>
              <small class="text-gray-600">Founder, UrbanRetail</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- CTA Section -->
<section id="contact" class="py-5 bg-gradient-primary text-white">
  <div class="container py-5">
    <div class="row justify-content-center text-center">
      <div class="col-lg-8" data-aos="zoom-in">
        <h2 class="display-5 fw-bold mb-4">Move Faster. Deliver Smarter.</h2>
        <p class="lead mb-5 opacity-90">
          Join 50,000+ businesses delivering with Nexus. Experience
          enterprise-grade logistics with the reliability and precision your
          business deserves.
        </p>

        <div
          class="d-flex flex-column flex-md-row justify-content-center gap-3"
        >
          <a href="#" class="btn btn-light btn-lg rounded-pill px-5 fw-bold">
            Get Started Free <i class="fas fa-arrow-right ms-2"></i>
          </a>
          <a href="#" class="btn btn-outline-light btn-lg rounded-pill px-5">
            Schedule Demo
          </a>
        </div>

        <p class="mt-4 small opacity-75">
          No credit card required • 14-day free trial • Enterprise plans
          available
        </p>
      </div>
    </div>
  </div>
</section>

<!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- AOS Animation -->
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

<script>
  /* =========================
     INITIALIZATION
  ========================== */
  document.addEventListener("DOMContentLoaded", function () {
    /* AOS */
    if (window.AOS) {
      AOS.init({
        duration: 800,
        once: true,
        offset: 100,
      });
    }

    /* Card Hover */
    document.querySelectorAll(".card-hover").forEach((card) => {
      card.addEventListener("mouseenter", () => {
        card.style.transition = "all 0.3s ease";
      });
    });

    /* Auto-dismiss alerts */
    document
      .querySelectorAll(".alert:not(.alert-permanent)")
      .forEach((alert) => {
        setTimeout(() => {
          alert.querySelector(".btn-close")?.click();
        }, 5000);
      });

    /* Tracking Input Validation */
    const trackingInput = document.getElementById("trackingId");
    if (trackingInput) {
      // Auto-format while typing
      trackingInput.addEventListener("input", function () {
        let value = this.value.toUpperCase();

        // Remove invalid characters
        value = value.replace(/[^A-Z0-9\-]/g, "");

        // Auto-insert dashes in correct positions
        if (value.length > 3 && !value.startsWith("DEL-")) {
          value = "DEL-" + value.slice(3);
        }
        if (value.length > 12 && value.charAt(12) !== "-") {
          value = value.slice(0, 12) + "-" + value.slice(12);
        }

        // Limit total length
        if (value.length > 17) {
          value = value.slice(0, 17);
        }

        this.value = value;

        // Update validation classes
        this.classList.remove("is-valid", "is-invalid");
        clearErrors();

        if (value) {
          const pattern = /^DEL-\d{8}-[A-Z0-9]{4}$/;
          if (pattern.test(value)) {
            this.classList.add("is-valid");
          } else if (value.length >= 3) {
            this.classList.add("is-invalid");
          }
        }
      });

      // Clear validation on focus
      trackingInput.addEventListener("focus", function () {
        this.classList.remove("is-invalid");
        clearErrors();
      });
    }

    /* Form Submission Handler */
    const trackingForm = document.getElementById("trackingForm");
    if (trackingForm) {
      trackingForm.addEventListener("submit", handleTrackSubmit);
    }

    // Add AI processing container to DOM if it doesn't exist
    if (!document.getElementById("aiProcessing")) {
      const aiContainer = document.createElement("div");
      aiContainer.id = "aiProcessing";
      aiContainer.style.display = "none";
      const trackingRow = document.querySelector(".row.g-3.mb-4");
      if (trackingRow) {
        trackingRow.after(aiContainer);
      }
    }
  });

  /* =========================
     FORM SUBMISSION
  ========================== */
  async function handleTrackSubmit(event) {
    event.preventDefault();

    const input = document.getElementById("trackingId");
    let trackingId = input.value.trim().toUpperCase();

    // Remove any extra spaces
    trackingId = trackingId.replace(/\s+/g, "");

    // Validate format
    const validationError = validateTrackingId(trackingId);
    if (validationError) {
      showNotification(validationError, "error");
      input.focus();
      input.select();
      return;
    }

    // Show loading state
    const btn = document.querySelector(".btn-track");
    const originalContent = btn.innerHTML;
    btn.innerHTML = `
      <span class="spinner-grow spinner-grow-sm me-2" role="status" aria-hidden="true"></span>
      <span class="loading-text">Analyzing with AI...</span>
    `;
    btn.disabled = true;

    // Add visual feedback to input
    input.style.borderColor = "#10b981";
    input.style.boxShadow = "0 0 0 3px rgba(16, 185, 129, 0.1)";
    input.disabled = true;

    try {
      // Show AI processing animation
      showAIProcessing(trackingId);

      // Send AJAX request to server
      const response = await fetch("/delivery/track", {
        method: "POST",
        headers: {
          Accept: "application/json",
          "Content-Type": "application/x-www-form-urlencoded",
          "X-Requested-With": "XMLHttpRequest",
        },
        body: new URLSearchParams({ trackingId }),
      });

      const data = await response.json();

      if (data.success) {
        // Complete AI processing animation
        completeAIProcessing();

        // Show success notification
        if (data.warning) {
          showNotification(data.warning, "warning");
          setTimeout(() => {
            showNotification("Tracking found! Redirecting...", "success");
          }, 1000);
        } else {
          showNotification("Tracking found! Redirecting...", "success");
        }

        // Add a slight delay for better UX
        setTimeout(() => {
          window.location.href = data.redirect;
        }, 1500);
      } else {
        // Reset form state
        resetFormState(btn, originalContent, input);

        // Show server error
        showNotification(data.error, "error");
        input.focus();
        input.select();

        // Hide AI processing
        hideAIProcessing();
      }
    } catch (error) {
      console.error("Network error:", error);

      // Reset form state
      resetFormState(btn, originalContent, input);

      // Show network error
      showNotification(
        "Network error. Please check your connection and try again.",
        "error"
      );

      // Hide AI processing
      hideAIProcessing();
    }
  }

  /* =========================
     VALIDATION FUNCTIONS
  ========================== */
  function validateTrackingId(trackingId) {
    if (!trackingId) {
      return "Tracking ID is required.";
    }

    // Allow DEL-XXXXXXXX-XXXX format
    const pattern = /^DEL-\d{8}-[A-Z0-9]{4}$/;

    if (!pattern.test(trackingId)) {
      // Provide more specific error messages
      if (!trackingId.startsWith("DEL-")) {
        return 'Tracking ID must start with "DEL-"';
      }

      const parts = trackingId.split("-");
      if (parts.length !== 3) {
        return "Format: DEL-8 digits-4 characters (e.g., DEL-51434020-X3RY)";
      }

      if (parts[1].length !== 8 || !/^\d{8}$/.test(parts[1])) {
        return "Middle part must be 8 digits";
      }

      if (parts[2].length !== 4 || !/^[A-Z0-9]{4}$/.test(parts[2])) {
        return "Last part must be 4 alphanumeric characters";
      }

      return "Invalid tracking ID format";
    }

    return null; // No error
  }

  /* =========================
     NOTIFICATION SYSTEM (UPDATED)
  ========================== */
  function showNotification(message, type = "info") {
    // Remove existing notifications
    const existing = document.querySelectorAll(".notification-toast");
    existing.forEach((n) => n.remove());

    const icons = {
      success: "fas fa-check-circle",
      error: "fas fa-exclamation-circle",
      warning: "fas fa-exclamation-triangle",
      info: "fas fa-info-circle",
    };

    const colors = {
      success: "linear-gradient(135deg, #10b981 0%, #059669 100%)",
      error: "linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",
      warning: "linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",
      info: "linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",
    };

    const notification = document.createElement("div");
    notification.className = "notification-toast position-fixed top-4 end-4";
    notification.style.zIndex = "99999";
    notification.innerHTML = `
      <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header" style="background: ${
          colors[type]
        }; color: white; border-radius: 12px 12px 0 0; padding: 0.75rem 1rem;">
          <i class="${icons[type]} me-2 fs-6"></i>
          <strong class="me-auto fs-6">${
            type.charAt(0).toUpperCase() + type.slice(1)
          }</strong>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body bg-white" style="border-radius: 0 0 12px 12px; padding: 1rem; box-shadow: 0 10px 25px rgba(0,0,0,0.1);">
          ${message}
        </div>
      </div>
    `;

    document.body.appendChild(notification);

    // Auto-dismiss after appropriate time
    const dismissTime = type === "success" ? 3000 : 5000;
    setTimeout(() => {
      if (notification.parentNode) {
        notification.remove();
      }
    }, dismissTime);

    // Add close button functionality
    notification.querySelector(".btn-close").addEventListener("click", () => {
      notification.remove();
    });

    // Add CSS animation if not already present
    if (!document.querySelector("#notification-toast-styles")) {
      const style = document.createElement("style");
      style.id = "notification-toast-styles";
      style.textContent = `
        @keyframes slideInRight {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        
        .notification-toast {
          animation: slideInRight 0.3s ease-out !important;
        }
        
        .notification-toast .toast {
          min-width: 320px;
          border: none;
          border-radius: 12px;
          overflow: hidden;
        }
        
        .notification-toast .toast-header {
          font-size: 0.9rem;
          font-weight: 600;
        }
        
        .notification-toast .toast-body {
          font-size: 0.9rem;
          line-height: 1.4;
        }
      `;
      document.head.appendChild(style);
    }
  }

  /* =========================
     AI PROCESSING FUNCTIONS
  ========================== */
  function showAIProcessing(trackingId) {
    const aiContainer = document.getElementById("aiProcessing");
    if (!aiContainer) return;

    aiContainer.style.display = "block";
    aiContainer.innerHTML = `
      <div class="ai-processing-animation">
        <div class="ai-header">
          <i class="fas fa-brain text-primary me-2"></i>
          <span class="fw-bold">AI Route Analysis in Progress</span>
          <small class="text-muted ms-2">${trackingId}</small>
        </div>
        <div class="ai-steps">
          <div class="ai-step active" data-step="1">
            <i class="fas fa-search me-2"></i>
            <span>Querying global database...</span>
            <i class="fas fa-check ms-auto" style="display: none;"></i>
          </div>
          <div class="ai-step" data-step="2">
            <i class="fas fa-microchip me-2"></i>
            <span>Analyzing route patterns...</span>
            <i class="fas fa-check ms-auto" style="display: none;"></i>
          </div>
          <div class="ai-step" data-step="3">
            <i class="fas fa-robot me-2"></i>
            <span>Calculating ETA with AI...</span>
            <i class="fas fa-check ms-auto" style="display: none;"></i>
          </div>
          <div class="ai-step" data-step="4">
            <i class="fas fa-map-marked-alt me-2"></i>
            <span>Generating real-time map...</span>
            <i class="fas fa-check ms-auto" style="display: none;"></i>
          </div>
        </div>
        <div class="ai-progress">
          <div class="ai-progress-bar" style="width: 25%"></div>
        </div>
      </div>
    `;

    // Animate through steps
    let currentStep = 1;
    const steps = document.querySelectorAll(".ai-step");
    const progressBar = document.querySelector(".ai-progress-bar");

    const interval = setInterval(() => {
      if (currentStep <= 4) {
        // Mark previous step as completed
        if (currentStep > 1) {
          const prevStep = steps[currentStep - 2];
          prevStep.classList.remove("active");
          prevStep.querySelector(".fa-check").style.display = "inline-block";
        }

        // Activate current step
        const currentStepEl = steps[currentStep - 1];
        if (currentStepEl) {
          currentStepEl.classList.add("active");

          // Update progress bar
          const progress = (currentStep / 4) * 100;
          progressBar.style.width = `${progress}%`;
          progressBar.style.transition = "width 0.8s ease";
        }

        currentStep++;
      } else {
        clearInterval(interval);
      }
    }, 600);
  }

  function completeAIProcessing() {
    const steps = document.querySelectorAll(".ai-step");
    const progressBar = document.querySelector(".ai-progress-bar");

    if (steps.length && progressBar) {
      // Mark all steps as completed
      steps.forEach((step) => {
        step.classList.remove("active");
        step.querySelector(".fa-check").style.display = "inline-block";
      });

      // Complete progress bar
      progressBar.style.width = "100%";
      progressBar.style.backgroundColor = "#10b981";

      // Show final completion
      setTimeout(() => {
        const aiContainer = document.getElementById("aiProcessing");
        if (aiContainer) {
          aiContainer.innerHTML = `
            <div class="ai-completion">
              <div class="ai-success">
                <i class="fas fa-check-circle text-success fs-1 mb-3"></i>
                <h5 class="fw-bold">Analysis Complete!</h5>
                <p class="text-muted">Redirecting to tracking results...</p>
              </div>
            </div>
          `;
        }
      }, 500);
    }
  }

  function hideAIProcessing() {
    const aiContainer = document.getElementById("aiProcessing");
    if (aiContainer) {
      aiContainer.style.display = "none";
      aiContainer.innerHTML = "";
    }
  }

  function resetFormState(btn, originalContent, input) {
    btn.innerHTML = originalContent;
    btn.disabled = false;
    input.disabled = false;
    input.style.borderColor = "";
    input.style.boxShadow = "";
  }

  /* =========================
     CLIPBOARD PASTE
  ========================== */
  window.pasteFromClipboard = async function () {
    const input = document.getElementById("trackingId");
    const pasteBtn = document.getElementById("pasteBtn");

    try {
      const text = await navigator.clipboard.readText();
      if (!text.trim()) {
        showNotification(
          "Clipboard is empty or contains only whitespace.",
          "warning"
        );
        return;
      }

      // Clean and format the pasted text
      let cleanedText = text.trim().toUpperCase().replace(/\s+/g, "");

      // Auto-format to DEL-XXXXXXXX-XXXX
      if (/^\d{8}-[A-Z0-9]{4}$/.test(cleanedText)) {
        cleanedText = "DEL-" + cleanedText;
      }

      input.value = cleanedText;
      input.focus();
      input.select();

      // Visual feedback
      if (pasteBtn) {
        const originalHTML = pasteBtn.innerHTML;
        pasteBtn.innerHTML = '<i class="fas fa-check me-1"></i>Pasted!';
        pasteBtn.classList.replace(
          "btn-outline-primary",
          "btn-outline-success"
        );

        // Add pulse animation
        pasteBtn.classList.add("pulse-animation");

        setTimeout(() => {
          pasteBtn.innerHTML = originalHTML;
          pasteBtn.classList.replace(
            "btn-outline-success",
            "btn-outline-primary"
          );
          pasteBtn.classList.remove("pulse-animation");
        }, 1500);
      }

      // Validate the pasted content
      const validationError = validateTrackingId(cleanedText);
      if (validationError) {
        input.classList.add("is-invalid");
        showNotification(
          "Invalid format detected. Please correct the tracking ID.",
          "warning"
        );
      } else {
        input.classList.add("is-valid");
        showNotification(
          "Valid tracking ID detected! Press Enter to track.",
          "success"
        );
      }
    } catch (error) {
      console.error("Clipboard error:", error);
      showNotification(
        "Unable to access clipboard. Please paste manually (Ctrl+V).",
        "error"
      );

      // Focus input for manual paste
      input.focus();
      input.select();
    }
  };

  /* =========================
     HELPER FUNCTIONS
  ========================== */
  function showError(message, input) {
    showNotification(message, "error");
    if (input) input.classList.add("is-invalid");
  }

  function showSuccess(message) {
    showNotification(message, "success");
  }

  function clearErrors() {
    const container = document.getElementById("errorContainer");
    if (container) {
      container.innerHTML = "";
      container.style.display = "none";
    }
  }

  // Add CSS for animations and styles
  if (!document.querySelector("#ai-styles")) {
    const style = document.createElement("style");
    style.id = "ai-styles";
    style.textContent = `
      @keyframes pulse {
        0%, 100% {
          transform: scale(1);
          box-shadow: 0 0 0 0 rgba(25, 135, 84, 0.7);
        }
        50% {
          transform: scale(1.05);
          box-shadow: 0 0 0 10px rgba(25, 135, 84, 0);
        }
      }
      
      .pulse-animation {
        animation: pulse 0.6s ease-in-out;
      }
      
      .tracking-input.is-valid {
        border-color: #198754 !important;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e");
      }
      
      .tracking-input.is-invalid {
        border-color: #dc3545 !important;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");
      }
      
      /* AI Processing Styles */
      .ai-processing-animation {
        background: linear-gradient(135deg, rgba(13, 110, 253, 0.05), rgba(32, 201, 151, 0.05));
        border-radius: 12px;
        padding: 1.5rem;
        border: 1px solid rgba(13, 110, 253, 0.1);
        margin-top: 1rem;
        animation: fadeIn 0.5s ease;
      }
      
      .ai-header {
        display: flex;
        align-items: center;
        margin-bottom: 1.5rem;
        color: #1e293b;
        font-size: 1.1rem;
      }
      
      .ai-steps {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-bottom: 1.5rem;
      }
      
      .ai-step {
        display: flex;
        align-items: center;
        padding: 0.75rem 1rem;
        background: white;
        border-radius: 8px;
        border-left: 4px solid #e2e8f0;
        color: #64748b;
        font-weight: 500;
        transition: all 0.3s ease;
      }
      
      .ai-step.active {
        border-left-color: #0d6efd;
        background: rgba(13, 110, 253, 0.05);
        color: #1e293b;
        box-shadow: 0 2px 8px rgba(13, 110, 253, 0.1);
        transform: translateX(5px);
      }
      
      .ai-step i:first-child {
        width: 20px;
        text-align: center;
      }
      
      .ai-progress {
        height: 6px;
        background: #e2e8f0;
        border-radius: 3px;
        overflow: hidden;
      }
      
      .ai-progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #0d6efd, #20c997);
        width: 0%;
        border-radius: 3px;
        transition: width 0.8s ease, background-color 0.3s ease;
      }
      
      .ai-completion {
        text-align: center;
        padding: 2rem;
        animation: fadeIn 0.5s ease;
      }
      
      .ai-success {
        animation: bounceIn 0.6s ease;
      }
      
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      @keyframes bounceIn {
        0% {
          transform: scale(0.3);
          opacity: 0;
        }
        50% {
          transform: scale(1.05);
          opacity: 1;
        }
        70% {
          transform: scale(0.9);
        }
        100% {
          transform: scale(1);
        }
      }
    `;
    document.head.appendChild(style);
  }
</script>
